# 要件定義書 - 中古衣料品販売自動化システム

## 1. プロジェクト概要
本プロジェクトは、中古衣料品販売における「出品」「発送指示」「再出品」の3つの主要業務を自動化し、業務効率を劇的に改善することを目的とする。

**コンセプト:**
「3つのボタン操作だけで、1日のEC業務が完結する自動化ツール」
パートスタッフによる手動入力や管理者のコピペ作業を排除する。

## 2. 業務フローと機能要件

システムは1日3回のトリガー実行を基本とし、PC上のデスクトップアプリから操作を行う。

### ① 出品自動化（午前の業務）
*   **現状:** パートスタッフが商品詳細をメール送信、管理者がコピペ・画像添付。
*   **自動化機能:**
    *   **Gmail API** を使用し、指定条件のメールを高速に取得・解析。
    *   本文から商品情報（タイトル、説明、価格、管理番号）を構造化データとして抽出。
    *   添付ファイル（商品画像）をローカルに保存。
    *   **ブラウザ自動操作**により、ヤフオク!（またはYahoo!ショッピング）の出品画面へアクセスし、情報を自動入力して出品完了まで行う。
*   **トリガー:** 「出品」ボタン

### ② 発送指示の自動化（昼の業務）
*   **現状:** 売れた商品の配送手配を手動入力。
*   **自動化機能:**
    *   **ブラウザ自動操作**でECサイトの管理画面から「落札/購入された商品」と「配送先情報」を取得。
    *   取得データを元に、配送業者（佐川急便WEBシステム等）へログインし、送り状発行データ入力または集荷依頼を自動実行する。
*   **トリガー:** 「発送」ボタン

### ③ 再出品の自動化（夜の業務）
*   **現状:** 売れ残りを手動再出品。
*   **自動化機能:**
    *   **ブラウザ自動操作**で「終了（落札者なし）」の商品リストを確認。
    *   対象商品をワンクリック（または自動巡回）で再出品処理する。
*   **トリガー:** 「再出品」ボタン

## 3. ユーザーインターフェース (UI)
*   **形態:** デスクトップアプリケーション（Windows/Mac対応）
*   **画面構成:**
    *   アプリを起動すると、3つの大きなボタン（「出品」「発送」「再出品」）が表示されるシンプル設計。
    *   下部に処理ログ（「メール3件受信しました」「出品完了: ID12345」等）を表示するテキストエリアを配置。

## 4. 技術スタック・実装方針
*   **開発言語:** Python 3.10+
*   **メール連携:** Gmail API (OAuth 2.0認証)
    *   画像の大量ダウンロードやメール解析を高速・安定的に行うため正規APIを採用。
*   **Web操作・スクレイピング:** Playwright for Python
    *   APIがないYahoo!系サービスおよび配送業者サイトの操作に使用。
    *   **認証対策:** 普段使用しているブラウザのプロファイル（Cookie情報）を読み込むことで、2段階認証やログインの手間を回避する「ステートフル」な運用を実現。
*   **GUIフレームワーク:** Flet または Tkinter
    *   軽量かつモダンなUIを短期間で構築。
*   **配布形式:** 実行ファイル（.exe / .app）またはPythonスクリプト実行

## 5. これからの確認事項
*   メールの解析ルール詳細（件名キーワード、本文の区切り文字など）
*   各サイトの「すでにログイン済みのブラウザプロファイル」のパス確認
*   佐川急便システムの具体的なメニュー遷移フロー
